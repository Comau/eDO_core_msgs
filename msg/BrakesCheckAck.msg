int8 state
uint8 mask